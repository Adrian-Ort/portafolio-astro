---
import { skills } from '../data/skills.js';
---

<section id="skills" class="section">
  <div class="container">
    <h2 class="section-title">Skills</h2>
    <p class="section-subtitle">Mis Herramientas y Tecnologías</p>
    
    <div class="skills-container">
      <div class="skills-category">
        <h3 class="category-title">Hard Skills</h3>
        <div class="skills-grid" id="hardSkillsGrid">
          {skills.hard.map((skill, index) => (
            <div class="skill-card" data-index={index}>
              <div class="skill-icon">
                <i class={skill.icon}></i>
              </div>
              <h4 class="skill-name">{skill.name}</h4>
            </div>
          ))}
        </div>
        <div class="load-more-container">
          <button class="btn btn-secondary" id="hardSkillsBtn">Ver más</button>
        </div>
      </div>
      
      <div class="skills-category">
        <h3 class="category-title">Soft Skills</h3>
        <div class="soft-skills-grid" id="softSkillsGrid">
          {skills.soft.map((skill, index) => (
            <div class="soft-skill-card card" data-index={index}>
              <h4>{skill.name}</h4>
              <p>{skill.description}</p>
            </div>
          ))}
        </div>
        <div class="load-more-container">
          <button class="btn btn-secondary" id="softSkillsBtn">Ver más</button>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .skills-container {
    display: flex;
    flex-direction: column;
    gap: 4rem;
  }
  
  .category-title {
    font-size: 1.75rem;
    margin-bottom: 2rem;
    text-align: center;
  }
  
  .skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
  }
  
  .skill-card {
    text-align: center;
  }
  
  .skill-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    color: var(--primary);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 80px;
  }
  
  .skill-name {
    margin-bottom: 0.75rem;
    font-size: 1.125rem;
  }
  
  .soft-skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
  }
  
  .soft-skill-card h4 {
    margin-bottom: 0.5rem;
    color: var(--primary);
  }
  
  .soft-skill-card p {
    color: var(--text-secondary);
    font-size: 0.95rem;
  }
  
  .load-more-container {
    text-align: center;
    margin-top: 2rem;
  }
  
  .load-more-container button {
    display: none;
  }
  
  @media (max-width: 768px) {
    .skill-card[data-index="4"],
    .skill-card[data-index="5"],
    .skill-card[data-index="6"],
    .skill-card[data-index="7"],
    .skill-card[data-index="8"],
    .skill-card[data-index="9"],
    .skill-card[data-index="10"],
    .skill-card[data-index="11"],
    .soft-skill-card[data-index="4"],
    .soft-skill-card[data-index="5"],
    .soft-skill-card[data-index="6"],
    .soft-skill-card[data-index="7"],
    .soft-skill-card[data-index="8"],
    .soft-skill-card[data-index="9"] {
      display: none;
    }
    
    .load-more-container button {
      display: inline-block;
    }
  }
</style>

<script>
  function initSkills() {
    const hardSkillsBtn = document.getElementById("hardSkillsBtn") as HTMLButtonElement;
    const hardSkillsGrid = document.getElementById("hardSkillsGrid") as HTMLDivElement;
    const softSkillsBtn = document.getElementById("softSkillsBtn") as HTMLButtonElement;
    const softSkillsGrid = document.getElementById("softSkillsGrid") as HTMLDivElement;
    
    let hardExpanded = false;
    let softExpanded = false;
    
    function resetDisplay() {
      hardExpanded = false;
      softExpanded = false;
      
      const hardCards = hardSkillsGrid.querySelectorAll("[data-index]");
      const softCards = softSkillsGrid.querySelectorAll("[data-index]");
      
      // Mostrar botones solo en móvil
      if (window.innerWidth <= 768) {
        hardCards.forEach((card, index) => {
          const element = card as HTMLDivElement;
          element.style.display = index < 4 ? "block" : "none";
        });
        softCards.forEach((card, index) => {
          const element = card as HTMLDivElement;
          element.style.display = index < 4 ? "block" : "none";
        });
        
        if (hardCards.length > 4) {
          hardSkillsBtn.style.display = "inline-block";
        } else {
          hardSkillsBtn.style.display = "none";
        }
        if (softCards.length > 4) {
          softSkillsBtn.style.display = "inline-block";
        } else {
          softSkillsBtn.style.display = "none";
        }
      } else {
        // Desktop: mostrar todos
        hardCards.forEach((card) => {
          const element = card as HTMLDivElement;
          element.style.display = "block";
        });
        softCards.forEach((card) => {
          const element = card as HTMLDivElement;
          element.style.display = "block";
        });
        
        hardSkillsBtn.style.display = "none";
        softSkillsBtn.style.display = "none";
      }
      
      hardSkillsBtn.textContent = "Ver más";
      softSkillsBtn.textContent = "Ver más";
    }
    
    function toggleHardSkills() {
      const cards = hardSkillsGrid.querySelectorAll("[data-index]");
      hardExpanded = !hardExpanded;
      
      cards.forEach((card, index) => {
        const element = card as HTMLDivElement;
        if (hardExpanded) {
          element.style.display = "block";
        } else {
          element.style.display = index < 4 ? "block" : "none";
        }
      });
      
      hardSkillsBtn.textContent = hardExpanded ? "Ver menos" : "Ver más";
    }
    
    function toggleSoftSkills() {
      const cards = softSkillsGrid.querySelectorAll("[data-index]");
      softExpanded = !softExpanded;
      
      cards.forEach((card, index) => {
        const element = card as HTMLDivElement;
        if (softExpanded) {
          element.style.display = "block";
        } else {
          element.style.display = index < 4 ? "block" : "none";
        }
      });
      
      softSkillsBtn.textContent = softExpanded ? "Ver menos" : "Ver más";
    }
    
    // Inicializar
    resetDisplay();
    
    // Listeners
    if (hardSkillsBtn) hardSkillsBtn.addEventListener("click", toggleHardSkills);
    if (softSkillsBtn) softSkillsBtn.addEventListener("click", toggleSoftSkills);
    
    // Actualizar cuando cambies tamaño de pantalla
    window.addEventListener("resize", resetDisplay);
  }
  
  document.addEventListener("DOMContentLoaded", initSkills);
</script>